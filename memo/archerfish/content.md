# When Threads Meet Interrupts: Effective Static Detection of Interrupt-Based Deadlocks in Linux [SEC'24]

## Abstract

- デッドロックはスレッドがロックを保持したまま, 他のスレッドがすでに保持している他のロックを取得しようとするときに発生するソフトウェアの応答不能状態のことで, 循環的なロック依存関係が発生する
- 割り込みベースのデッドロックは, 割り込みによってカーネル内で発生するデッドロックの一種
  - システム機能, パフォーマンス, セキュリティに重大なリスクをもたらす
- 既存の静的解析ツールは割り込みを特徴づけることなく, リソースベースのデッドロックに焦点を当てる
- Archerfish は Linux カーネルにおける割り込みベースのデッドロックを効果的に特定する静的解析アプローチ
- Archerfish は割り込み認識ロックグラフ (Interrupt-Aware Lock Graph: ILG) を利用して, 通常のロック依存性と割り込みロック依存性の両方を捕える
  - デッドロックの検出問題をグラフサイクルの発見と絞り込みに軽減する
- さらに, ILG の構築とデッドロックサイクルの絞り込みのために4つの解析コンポーネントを組み込む
- 以下の3つの課題に対処
  - 広範囲の割り込みに関連する並行空間
  - 潜在的な割り込みハンドラの特定
  - デッドロックサイクルの実現可能性の検証
- 実験結果は Archerfish が Linux カーネル (19.8 MLoC) を約1時間で正確に解析できる
- 未知のデッドロックを76個発見
- 発見されたデッドロックの潜伏期間が平均9.9年間である